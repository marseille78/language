# (PHP) 12 HTTP

## HTTP-методи

GET --- (HTTP-методи)

Це спосіб запиту інформації з вебсайту або сервера, коли ти просто хочеш отримати дані, не змінюючи нічого на сервері. Наприклад, коли ти відкриваєш сторінку в браузері — саме так твій пристрій просить у сервера надіслати вміст цієї сторінки.



POST --- (HTTP-методи)

Це спосіб надіслати дані на сервер, щоб щось створити або змінити. Наприклад, коли ти заповнюєш форму на сайті й натискаєш "відправити", твоя інформація передається на сервер саме цим методом, щоб її зберегти або обробити.



## Заголовки запиту

Host --- (Заголовки запиту)

Це частина запиту, яка каже серверу, до якого сайту або домену звертається користувач. Це особливо важливо, коли на одному сервері працює кілька сайтів — завдяки цьому заголовку сервер розуміє, який саме сайт треба показати.



Accept --- (Заголовки запиту)

Це частина запиту, яка повідомляє сервер, у якому форматі користувач хоче отримати відповідь. Наприклад, браузер може попросити HTML-сторінку, зображення чи дані у форматі JSON. Завдяки цьому сервер знає, який тип даних надсилати у відповіді.



Accept-Language --- (Заголовки запиту)

Це частина запиту, яка повідомляє сервер, якою мовою користувач хоче отримати відповідь. Наприклад, якщо вказано українську, сервер — якщо має таку версію — надішле сторінку саме цією мовою.



Referer --- (Заголовки запиту)

Це частина запиту, яка показує серверу, з якої сторінки користувач перейшов за посиланням. Вона допомагає зрозуміти, звідки саме прийшов запит — наприклад, з іншого сайту або з попередньої сторінки на тому ж сайті.



User-Agent --- (Заголовки запиту)

Це частина запиту, яка повідомляє серверу, яким пристроєм, браузером або програмою користується клієнт. Завдяки цьому сервер може адаптувати відповідь під конкретну платформу або відстежувати статистику використання.



## Заголовки відповіді

Server --- (Заголовки відповіді)

Це частина відповіді, яка повідомляє клієнту, яке програмне забезпечення використовується на стороні сервера — наприклад, назву та версію веб-сервера. Це допомагає зрозуміти, як працює сервер, але також може розкрити технічні деталі, які іноді приховують з міркувань безпеки.



Content-Type --- (Заголовки відповіді)

Це частина відповіді, яка повідомляє клієнту, який саме тип даних він отримує — наприклад, текст, зображення або JSON. Завдяки цьому браузер або інша програма знає, як правильно обробити вміст.



Content-Length --- (Заголовки відповіді)

Це вказівка в відповіді, яка повідомляє клієнту, скільки байтів займає тіло повідомлення. Завдяки цьому клієнт знає, коли закінчуються отримані дані.



Last-Modified --- (Заголовки відповіді)

Цей заголовок вказує дату та час останньої модифікації ресурсу на сервері. Це дозволяє клієнту перевіряти, чи змінився ресурс після останнього запиту, щоб уникнути завантаження оновленої версії без необхідності.



Set-Cookie --- (Заголовки відповіді)

Вказує браузеру зберегти дані до *куків*, які сервер може використовувати при наступних запитах, наприклад, для автентифікації або збереження налаштувань користувача.



Location --- (Заголовки відповіді)

Це значення, яке вказує клієнту, куди саме потрібно перейти (зробити перезапит) — наприклад, нову адресу ресурсу після перенаправлення або місце, де щойно створений ресурс доступний.



Refresh ---  (Заголовки відповіді)

Це інструкція від сервера, яка говорить браузеру автоматично оновити сторінку або перейти на іншу адресу через певний проміжок часу.



## Заголовки запиту і відповіді

Cache-Control --- (Заголовки запиту і відповіді)

Цей заголовок повідомляє, як довго та за яких умов веб-контент може зберігатися в кеші браузера чи проміжних серверів. Він дозволяє контролювати, чи потрібно завжди отримувати нову версію ресурсу з сервера, чи можна використовувати збережену копію, а також визначати термін дії кешу.



## Типи отриманих даних

application/x-www-form-urlencoded --- (Типи отриманих даних. *Content-Type*)

Це тип вмісту, який використовується для передачі даних у форматі, схожому на пару "ключ-значення". Дані кодуються у вигляді тексту, де кожен параметр відокремлюється амперсандом ("&"), а ключ і значення розділяються знаком рівності ("="). Це часто використовуються для передачі даних через форми в веб-браузерах.



application/rtf --- (Типи отриманих даних. *Content-Type*)

Це вказівка для браузера чи іншого клієнта, що вміст відповіді є текстовим документом у форматі багатого тексту (RTF), який підтримує стилі, шрифти, форматування, але не є таким складним, як, наприклад, формат DOC або PDF.



text/html --- (Типи отриманих даних. *Content-Type*)

Це позначення, яке повідомляє браузеру чи іншій програмі, що вміст відповіді є звичайною *HTML-сторінкою*, створеною за допомогою мови розмітки, яка використовується для структурування і відображення інформації в інтернеті.



text/xml --- (Типи отриманих даних. *Content-Type*)

Це вказівка для програми, що отриманий вміст є текстовим *XML-документом*, структурованим за правилами спеціальної мови, яка використовується для зберігання, передавання і опису даних у вигляді дерева з тегами.



text/plain --- (Типи отриманих даних. *Content-Type*)

Це означає, що отриманий вміст є *звичайним текстом без форматування*, розмітки або спеціальних інструкцій — просто послідовність символів, яку можна відобразити або прочитати без додаткової обробки.



file/octet-stream --- (Типи отриманих даних. *Content-Type*)

Це означає, що вміст відповіді є *необробленими двійковими даними невизначеного типу*, які слід *завантажити або зберегти як файл*, оскільки браузер не знає, як їх правильно відобразити.



## Серверні змінні

$_SERVER["REQUEST_URI"] --- (Серверні змінні)

Це змінна, яка містить повний URL-адрес запиту, що був надісланий до сервера. Вона включає шлях до ресурсу та будь-які параметри, що йдуть після знака питання ("?") в URL. Це дозволяє отримати інформацію про те, яка конкретно сторінка чи ресурс була запитана клієнтом.



$_SERVER["REQUEST_METHOD"] --- (Серверні змінні)

Ця змінна містить метод HTTP-запиту, який використовувався для відправлення даних на сервер. Вона вказує, чи був запит зроблений за допомогою методу "GET", "POST" або іншого доступного методу. Це дозволяє серверу розрізняти типи запитів і обробляти їх відповідним чином.



$_SERVER["HTTP_HOST"] --- (Серверні змінні)

Ця змінна містить доменне ім'я або IP-адресу сервера, на який був надісланий запит. Вона також може включати порт, якщо він не є стандартним (наприклад, 80 для HTTP або 443 для HTTPS). Це дає змогу визначити, який саме сервер обробляє запит, особливо в випадку, якщо на сервері працює кілька веб-додатків або сайтів.



$_SERVER["HTTP_USER_AGENT"] --- (Серверні змінні)

Ця змінна містить інформацію про веб-браузер та операційну систему користувача, який надіслав запит до сервера. Вона може включати дані про версію браузера, його тип, а також тип операційної системи, наприклад, Windows, macOS, Linux чи мобільні операційні системи, як iOS або Android. Це дає змогу веб-серверу адаптувати відповідь залежно від характеристик клієнта.



$_SERVER["QUERY_STRING"] --- (Серверні змінні)

Ця змінна містить частину URL після знаку питання, яка передає параметри запиту. Це текст, який зазвичай виглядає як набір пар "ключ-значення", розділених амперсандом (&), і використовується для передачі даних через URL. Наприклад, якщо в URL є щось на зразок *example.com?page=1&sort=asc*, то ця змінна буде містити *page=1&sort=asc*.



$_SERVER["SCRIPT_NAME"] --- (Серверні змінні)

Ця змінна містить відносний шлях до поточного скрипта, який виконується на сервері. Вона вказує на місце, де знаходиться файл скрипта в структурі вашого веб-сайту, починаючи з кореневої директорії веб-сервера. Наприклад, якщо ваш скрипт знаходиться за адресою *example.com/folder/script.php*, ця змінна буде містити */folder/script.php*.



$_SERVER["PHP_SELF"] --- (Серверні змінні)

Це значення показує шлях до поточного виконуваного файлу відносно кореня вебсервера, і зазвичай використовується для того, щоб форма на сторінці могла надіслати дані самій собі.



$_SERVER["REMOTE_ADDR"] --- (Серверні змінні)

Це значення зберігає IP-адресу користувача, який надіслав запит до сервера. Воно дозволяє визначити, звідки саме надійшов запит.



## Використання заголовків

header("Location: URL") --- (Використання заголовків)

Це команда, яка повідомляє браузеру користувача автоматично перейти на вказану веб-адресу *URL* зі статусом *302*.



header("HTTP/1.1 301 Moved Permanently");
header("Location: URL"); --- (Використання заголовків)

Ця конструкція повідомляє браузеру (за допомогою двох інструкцій), що сторінку було остаточно перенесено на нову адресу, і автоматично перенаправляє користувача на цю нову адресу *URL*.



header("Location: URL", true, 301) --- (Використання заголовків)

Ця конструкція вказує браузеру (за допомогою однієї інструкції), що сторінку остаточно перенесено на нову адресу *URL*, і автоматично перенаправляє користувача туди, використовуючи код відповіді 301 (постійне перенаправлення).



header("Refresh: 3") --- (Використання заголовків)

Ця конструкція в PHP надсилає браузеру інструкцію перезавантажити поточну сторінку через 3 секунди після її завантаження.



header("Refresh: 3; url=URL") --- (Використання заголовків)

Ця конструкція в PHP надсилає браузеру інструкцію через 3 секунди автоматично перейти на вказану сторінку — *URL*.



header("Content-Type: text/xml") --- (Використання заголовків)

Ця конструкція в PHP повідомляє браузеру або іншому клієнту, що відповідь сервера містить дані у форматі XML.



header("Content-Type: text/html; charset=utf-8") --- (Використання заголовків)

Ця конструкція в PHP повідомляє браузеру, що відповідь сервера є *HTML-документом* і що текст у цьому документі закодований у кодуванні *UTF-8*. Це забезпечує правильне відображення символів усіх мов.



header("Content-Type: text/plain");
header("Content-Disposition: attachment; filename=\"file.txt\""); --- (Використання заголовків)

Ця конструкція в PHP змушує браузер завантажити текстовий файл. Перша команда вказує, що відповідь — це звичайний текст, а друга — що цей текст слід обробити як вкладення (тобто файл для завантаження) з назвою *"file.txt"*.



## Керування кешем

header("Cache-Control: no-cache, max-age=0") --- (Керування кешем)

(Заборона кешування.) Ця конструкція в PHP повідомляє браузеру або іншому клієнту не зберігати відповідь у кеші. Вона забороняє кешування та встановлює термін зберігання в кеші на 0 секунд, щоб забезпечити завжди актуальне отримання даних із сервера.



header("Cache-Control: no-store") --- (Керування кешем)

(Повна заборона кешування.) Ця конструкція вказує браузеру та проміжним серверам не зберігати жодну копію сторінки в кеші. Це означає, що при кожному зверненні до сторінки потрібно запитувати її заново з сервера, що особливо корисно для конфіденційних або динамічних даних.



header("Cache-Control: max-age=3600") --- (Керування кешем)

(Дозвіл кешування на одну годину відносно часу запиту) Ця конструкція повідомляє браузеру, що отриманий вміст можна зберігати в кеші і використовувати його повторно протягом наступних *3600 секунд* (1 години) без нового запиту до сервера. Це допомагає зменшити навантаження на сервер і пришвидшує завантаження сторінки.



header("Expires: " . date("r", time() + 3600)) --- (Керування кешем)

(Дозвіл кешування на одну годину) Ця конструкція встановлює *точний момент у майбутньому* (через *1 годину від поточного часу*), після якого браузер вважатиме вміст застарілим і звернеться до сервера за оновленою версією. Це корисно для контролю кешування сторінки або файлу.